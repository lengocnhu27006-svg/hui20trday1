<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Quản Lý Hụi</title>
<style>
body{
  font-family:Arial;
  padding:20px;
  background:#f4f6fb;
}

h2{
  color:#2c3e50;
}

button{
  padding:6px 12px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:#3498db;
  color:white;
}

button:hover{
  background:#2980b9;
}

table{
  <p id="tongTien" style="margin-top:15px;font-weight:bold"></p>
  border-collapse:collapse;
  width:100%;
  margin-top:15px;
  background:white;
}

th{
  background:#2c3e50;
  color:white;
  padding:10px;
}

td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}

input{
  padding:5px;
  border-radius:4px;
  border:1px solid #ccc;
}

input[type="checkbox"]{
  transform:scale(1.3);
}

.daHot{
  color:#e74c3c;
  font-weight:bold;
}

.dong{
  background:#e8f8f5;
}

.chuaDong{
  background:#fdecea;
}
</style>
</head>
<body>

<h2>QUẢN LÝ HỤI</h2>

<button onclick="themNguoi()">➕ Thêm người</button>

<table>
<thead>
<tr>
  <th>Tên người</th>
  <th>Đã đóng</th>
  <th>Hốt</th>
<th>Tiền hốt</th>
</tr>
</thead>
<tbody id="bang"></tbody>
</table>

<script>
  const TIEN_HUI = 5000000; // 5 triệu / tháng
let danhSach = JSON.parse(localStorage.getItem("hui")) || [];

function luu(){
  localStorage.setItem("hui", JSON.stringify(danhSach));
}

function themNguoi(){
  danhSach.push({
    ten: "Người " + (danhSach.length + 1),
    daDong: false,
    daHot: false,
    tienHot: 0
  });
  luu();
  veBang();
}

function tickDong(i){
  danhSach[i].daDong = !danhSach[i].daDong;
  luu();
  veBang();
}

function hotHui(i){
  if(danhSach[i].daHot){
    alert("Người này đã hốt rồi!");
    return;
  }

  let soNguoiChuaHot = danhSach.filter(n => !n.daHot).length;

  danhSach[i].daHot = true;
  danhSach[i].tienHot = soNguoiChuaHot * TIEN_HUI;

  luu();
  veBang();
}
function veBang(){
  let html = "";
  danhSach.forEach((n,i)=>{
    html += `
    <tr class="${n.daDong ? 'dong' : 'chuaDong'}">
      <td>
        <input value="${n.ten}"
        oninput="danhSach[${i}].ten=this.value;luu()">
      </td>

      <td>
        <input type="checkbox"
        ${n.daDong ? "checked" : ""}
        onclick="tickDong(${i})">
      </td>

      <td>
  ${n.daHot 
    ? "<span class='daHot'>ĐÃ HỐT</span>"
    : "<button onclick='hotHui("+i+")'>Hốt</button>"
  }
</td>

<td>
  ${n.daHot ? n.tienHot.toLocaleString() + " đ" : ""}
</td>
    </tr>`;
  });
  document.getElementById("bang").innerHTML = html;
}

veBang();let soNguoiDong = danhSach.filter(n => n.daDong).length;
let tongDong = soNguoiDong * TIEN_HUI;

document.getElementById("tongTien").innerText =
  "Tổng tiền đã đóng: " + tongDong.toLocaleString() + " đ";
</script>

</body>
</html>



